const apiUrl = 'https://zylalabs.com/api/1975/ai+text+detection+api/1734/ai+detection'; // AI Text Detection API endpoint URL
const apiKey = 'Bearer 2175|GUhaGLy13GdpJV1KXIYzKJwtbuZ9qOqRuytOtJUq'; // API key


// Sample text for analysis
const textToAnalyze = "Chat GPT is an advanced language model developed by OpenAI, designed to simulate human-like communication with a high degree of accuracy and fluency. It uses a sophisticated neural network to analyze and interpret text inputs, enabling it to generate responses that are contextually relevant and linguistically coherent. Chat GPT is trained on vast amounts of natural language data, allowing it to understand a wide range of topics and conversations. Its impressive capabilities have made it a valuable tool for a diverse range of applications, including customer service, chatbots, and personal assistants. One of the key advantages of Chat GPT is its ability to learn from its interactions with humans, allowing it to improve its responses over time. It can also adapt to different conversational styles and preferences, making it a versatile tool for a wide range of use cases. Chat GPT's capabilities are not limited to text-based communication. It can also generate human-like speech, enabling it to interact with users in a more natural and intuitive manner. Overall, Chat GPT is a powerful and flexible language model that has the potential to revolutionize the way we communicate with machines. Its advanced capabilities and versatility make it an indispensable tool for anyone looking to create engaging and effective conversational experiences."; //Replace with text output generated by Google Cloud Vision

// Create the request payload
const requestData = {
  text: textToAnalyze,
};

// Create the request headers, including the API key
const headers = {
  'Content-Type': 'application/json',
  'Authorization': apiKey,
};

// Create the fetch options for the POST request
const requestOptions = {
  method: 'POST',
  headers: headers,
  body: JSON.stringify(requestData),
};

// Make the POST request to the API
fetch(apiUrl, requestOptions)
  .then((response) => {
    if (!response.ok) {
      throw new Error(`HTTP error! Status: ${response.status}`);
    }
    return response.json();
  })
  .then((data) => {
    // Handle the response data from the API
    const result = data.fakePercentage;

    // Get a reference to the element where you want to display the result
    const verdictElement = document.getElementById('verdict-text');
    const percentElement = document.getElementById('percent-err');
    const descriptionElement = document.getElementById('verdict-description');

    // Display content based on the 'result' value
    if (result > 50) {
      verdictElement.textContent = 'Scam';
      verdictElement.style.color = 'Red';
      percentElement.style.color = 'Red';
      descriptionElement.textContent = 'Based on the results, it is likely that the email you provided is fraudulent. Please contact your local branch to verify the validity of the email before further contact. Below is the contact information of a branch near you.';
  } else if (result > 30 && result <= 50) {
      verdictElement.textContent = 'Real';
      verdictElement.style.color = 'Green';
      percentElement.style.color = 'Yellow';
  } else if (result >= 0 && result <= 30) {
      verdictElement.textContent = 'Real';
      verdictElement.style.color = 'Green';
      percentElement.style.color = 'Green';
  } else {
      percentElement.style.color = 'White';
  }  

    percentElement.textContent = result + '%';
    console.log(data);
    
  })
  .catch((error) => {
    console.error('Fetch Error:', error);
  });

const apiUrl = 'https://zylalabs.com/api/1975/ai+text+detection+api/1734/ai+detection'; // AI Text Detection API endpoint URL
const apiKey = 'Bearer 2175|GUhaGLy13GdpJV1KXIYzKJwtbuZ9qOqRuytOtJUq'; // API key


// Sample text for analysis
const textToAnalyze = 'ation. It can also generate human-like speech, enabling it to interact with users in a more natural and intuitive manner. Overall, Chat GPT is a powerful and flexible language model that has the potential to revolutionize the way we communicate with machines. Its advanced capabilities and versatility make it an indispensable tool for anyone looking to create engaging and effective conversational experiences.'; //Replace with text output generated by Google Cloud Vision

// Create the request payload
const requestData = {
  text: textToAnalyze,
};

// Create the request headers, including the API key
const headers = {
  'Content-Type': 'application/json',
  'Authorization': apiKey,
};

// Create the fetch options for the POST request
const requestOptions = {
  method: 'POST',
  headers: headers,
  body: JSON.stringify(requestData),
};

// Make the POST request to the API
fetch(apiUrl, requestOptions)
  .then((response) => {
    if (!response.ok) {
      throw new Error(`HTTP error! Status: ${response.status}`);
    }
    return response.json();
  })
  .then((data) => {
    // Handle the response data from the API
    const result = data.fakePercentage;

    // Get a reference to the element where you want to display the result
    const verdictElement = document.getElementById('verdict-text');
    const percentElement = document.getElementById('percent-err');

    // Display content based on the 'result' value
    if (result > 50) {
      verdictElement.textContent = 'Scam';
      verdictElement.style.color = 'Red';
      percentElement.style.color = 'Red';
    } else if (30 < result <= 50) {
      verdictElement.textContent = 'Real';
      verdictElement.style.color = 'Green';
      percentElement.style.color = 'Yellow';
    }else if (0 <= result <= 30){
      verdictElement.textContent = 'Real';
      verdictElement.style.color = 'Green';
      percentElement.style.color = 'Green';
    }

    percentElement.textContent = result + '%';
    console.log(data);
    
  })
  .catch((error) => {
    console.error('Fetch Error:', error);
  });

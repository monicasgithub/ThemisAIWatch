const apiUrl = 'https://zylalabs.com/api/1975/ai+text+detection+api/1734/ai+detection'; // Chat GPT Text Detection API endpoint URL
const apiKey = 'Bearer 2175|GUhaGLy13GdpJV1KXIYzKJwtbuZ9qOqRuytOtJUq'; // API key


// Sample text for analysis
const textToAnalyze = 'Our ML/AI project is so cool!'; //Replace with text output generated by Google Cloud Vision

// Create the request payload
const requestData = {
  text: textToAnalyze,
};

// Create the request headers, including the API key
const headers = {
  'Content-Type': 'application/json',
  'Authorization': apiKey,
};

// Create the fetch options for the POST request
const requestOptions = {
  method: 'POST',
  headers: headers,
  body: JSON.stringify(requestData),
};

// Make the POST request to the API
fetch(apiUrl, requestOptions)
  .then((response) => {
    if (!response.ok) {
      throw new Error(`HTTP error! Status: ${response.status}`);
    }
    return response.json();
  })
  .then((data) => {
    // Handle the response data from the API
    const result = data.fakePercentage;

    // Get a reference to the element where you want to display the result
    const verdictElement = document.getElementById('verdict-text');
    const percentElement = document.getElementById('percent-err');

    // Display content based on the 'result' value
    if (result > 50) {
      verdictElement.textContent = 'Scam';
      verdictElement.style.color = 'Red';
    } else if (result <= 50) {
      verdictElement.textContent = 'Real';
      verdictElement.style.color = 'Green';
    }

    percentElement.textContent = result + '%';
    console.log(data);
    
  })
  .catch((error) => {
    console.error('Fetch Error:', error);
  });

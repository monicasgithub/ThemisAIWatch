const apiUrl = 'https://zylalabs.com/api/1882/chat+gpt+text+detection+api/1577/text+analysis'; // Chat GPT Text Detection API endpoint URL
const apiKey = '2171|cmAru5ixjq8y3zlcBdU3Ae1wuMc8YFe37q9mDIvK'; // API key

// Sample text for analysis
const textToAnalyze = 'This is the text you want to analyze.'; //Replace with text output generated by Google Cloud Vision

// Create the request payload
const requestData = {
  text: textToAnalyze,
};

// Create the request headers, including the API key
const headers = {
  'Content-Type': 'application/json',
  'x-api-key': apiKey,
};

// Create the fetch options for the POST request
const requestOptions = {
  method: 'POST',
  headers: headers,
  body: JSON.stringify(requestData),
};

// Make the POST request to the API
fetch(apiUrl, requestOptions)
  .then((response) => {
    if (!response.ok) {
      throw new Error(`HTTP error! Status: ${response.status}`);
    }
    return response.json();
  })
  .then((data) => {
    // Handle the response data from the API
    const result = Math.floor(data.is_gpt_generated);

    // Get a reference to the element where you want to display the result
    const verdictElement = document.getElementById('result');
    const percentElement = document.getElementById('percent-err');
    const descriptionElement = document.getElementById('description');

    // Display content based on the 'result' value
    if (result > 50) {
      verdictElement.textContent = 'Scam: This is a potentially fraudulent text.';
    } else if (result <= 50) {
      verdictElement.textContent = 'Real: This text appears to be legitimate.';
    }
  })
  .catch((error) => {
    console.error('Fetch Error:', error);
  });
